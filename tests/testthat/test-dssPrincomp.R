test_that("dssPrincomp split works", {
  rem <- dssPrincomp('iris', type = 'split')
  pr1 <- princomp(session1$iris[,1:4])
  pr2 <- princomp(session2$iris[,1:4])
  expect_true(any(abs(rem$server1$loadings) - abs(pr1$loadings) < 1e-5))
  expect_true(any(abs(rem$server2$loadings) - abs(pr2$loadings) < 1e-5))
})

test_that("dssPrinComp combined works", {
  rem <- dssPrincomp('iris', type = 'combine', datasources = opals)
  pr <- princomp(iris[,1:4])
  expect_true(any(abs(rem$global$loadings) - abs(pr$loadings) < 1e-5))
})

test_that("biplot combined works", {
  rem <- dssPrincomp('iris', type = 'combine', datasources = opals)
  pr <- princomp(iris[,1:4])
  expect_null(biplot(rem$global, levels = 'iris_scores$Species'))
})
